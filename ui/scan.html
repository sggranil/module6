<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/media.css">
    <link rel="stylesheet" href="assets/css/template.css">
</head>
<body>
    
    <div class="navbar">
        <div class="navbar-content">

            <a id="menuButton"><i class="fas fa-bars"></i></a>

            <div class="navbar-item">
                <h4>Scan QR Code</h4>
            </div>
        </div>
    </div>

    <div class="navigation">
        <div class="nav-brand">
            <a href="/">EasyTrace</a>
        </div>
        <a href="scan.html">Scan</a>
        <a href="generate.html">Generate</a>
        <a href="tables.html">Tables</a>
    </div>

    <script>
        let navigation = document.querySelector('.navigation');
        let container = document.querySelector('.navbar');
        let menu = document.getElementById('menuButton');
    
        menu.addEventListener('click', () => {
            navigation.style.width = '200px';
        });

        window.onclick = function(event) {
            if(!container.contains(event.target)) {
                navigation.style.width = '0px';
            }
        };
    </script>

    <div class="container">
        <div class="row">
            <button onclick="openCam()" class="btn bg-primary border-sm-rounded justify-items-center">Open Camera</button>
            <video class="video-screen border-sm-rounded" id="video" width="640" height="480"></video>
            <button id="capture" class="btn bg-primary border-sm-rounded justify-items-center">Capture QR</button>
            <canvas id="canvas" width="640" height="480"></canvas>
        </div>

        <input class="form-input" type="text" id="count" placeholder="Insert comment and press Enter">

                <h4>User Comments</h4>
                <p class="border-sm-rounded border-secondary p-1 text-grey my-1" id="commentList">Comments will appear here...</p>
    </div>

    <script>
        let canvas = document.querySelector('#canvas');
        let context = canvas.getContext('2d');
        let video = document.querySelector('#video');
        var capture = document.getElementById('capture');

        function openCam() {
            if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({video: true}).then((stream) => {
                    video.srcObject = stream;
                    video.play();
                });
            }

            capture.addEventListener('click', () => {
                context.drawImage(video, 0, 0, 640, 480);
            });
        }
    </script>

    <script src="https://kit.fontawesome.com/6151fd81d3.js" crossorigin="anonymous"></script>
    <script src="assets/js/script.js"></script>
    
</body>
</html>